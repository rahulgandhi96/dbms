CREATE DATABASE SchoolDB;
USE SchoolDB;

CREATE TABLE Students(id INT, name VARCHAR(30));
CREATE TABLE Marks(id INT, subject VARCHAR(30), marks INT);

INSERT INTO Students VALUES (1,'Amit'),(2,'Riya'),(3,'Raj');
INSERT INTO Marks VALUES (1,'Math',85),(2,'Math',75),(3,'Math',90);

-- 1. Display all student details
SELECT * FROM Students;

-- 2. INNER JOIN – show student names with marks
SELECT s.name, m.subject, m.marks
FROM Students s
JOIN Marks m ON s.id = m.id;

-- 3. LEFT JOIN – show all students even if no marks
SELECT s.name, m.marks
FROM Students s
LEFT JOIN Marks m ON s.id = m.id;

-- 4. RIGHT JOIN – show all marks even if student missing
SELECT s.name, m.marks
FROM Students s
RIGHT JOIN Marks m ON s.id = m.id;

-- 5. CROSS JOIN – all possible combinations
SELECT s.name, m.subject FROM Students s CROSS JOIN Marks m;

-- 6. SUBQUERY – students scoring above average
SELECT name FROM Students
WHERE id IN (SELECT id FROM Marks WHERE marks > (SELECT AVG(marks) FROM Marks));

-- 7. SUBQUERY – find highest marks student
SELECT name FROM Students
WHERE id = (SELECT id FROM Marks WHERE marks = (SELECT MAX(marks) FROM Marks));

-- 8. CREATE VIEW – student marks view
CREATE VIEW StudentMarks AS
SELECT s.name, m.subject, m.marks
FROM Students s JOIN Marks m ON s.id = m.id;

-- 9. SELECT from view
SELECT * FROM StudentMarks;

-- 10. UPDATE and DELETE example
UPDATE Marks SET marks = 95 WHERE id = 2;
DELETE FROM Marks WHERE id = 3;

theory :

DML means Data Manipulation Language.
These commands are used to add, change, delete, and fetch data in a database.
Main DML commands:

INSERT – add new records
UPDATE – modify existing records
DELETE – remove records
SELECT – retrieve data

INSERT INTO Students (id, name, dept) VALUES (1, 'Omkar', 'CS');

JOIN:JOIN is used to combine rows from two or more tables based on a related column.
INNER JOIN:Returns only matching records from both tables.
syntax:SELECT Students.name, Marks.subject, Marks.marks
FROM Students
INNER JOIN Marks ON Students.id = Marks.id;

LEFT JOIN:Returns all records from the left table, even if the right table has no match.
syntax:
SELECT Students.name, Marks.subject
FROM Students
LEFT JOIN Marks ON Students.id = Marks.id;

RIGHT JOIN:Returns all records from the right table, even if the left table has no match.
syntax:SELECT Students.name, Marks.subject
FROM Students
RIGHT JOIN Marks ON Students.id = Marks.id;

CROSS JOIN:
Returns every possible combination (Cartesian product).
syntax:
SELECT Students.name, Marks.subject
FROM Students
CROSS JOIN Marks;

Subquery:A subquery is a query inside another query.
Used when one query depends on the result of another.

find students who scored more than class average
SELECT name
FROM Students
WHERE id IN (
    SELECT id
    FROM Marks
    WHERE marks > (SELECT AVG(marks) FROM Marks)
);

VIEW:A VIEW is a virtual table.
It stores a query, not the actual data.
Create a view:
CREATE VIEW StudentMarks AS
SELECT Students.name, Marks.subject, Marks.marks
FROM Students
JOIN Marks ON Students.id = Marks.id;

Use the view:
SELECT * FROM StudentMarks WHERE marks > 85;